{% extends "base.html" %}

{% block header %}
<link rel="stylesheet" href="{{base_dir}}style.css">
{% endblock %}

{% block content %}
<div class="index-area">
  <p class="index-title">Coverage Report</p>
  <p class="index-date">Created at {{generated|format_datetime}}</p>
  <table class="index-table">
    <thead>
      <tr class="index-header">
        <th>Filename</th>
        <th colspan="3">
          Line Coverage
          {% let percent = totals.lines.percent %}
          {% let color_text = "" %}
          {% include "color.html" %}
          <p class="{{color_text}}">{{"{:.2}"|format(totals.lines.percent)}} %</p>
        </th>
        <th colspan="3">
          Function Coverage
          {% let percent = totals.functions.percent %}
          {% let color_text = "" %}
          {% include "color.html" %}
          <p class="{{color_text}}">{{"{:.2}"|format(totals.functions.percent)}} %</p>
        </th>
        <th colspan="3">
          Region Coverage
          {% let percent = totals.regions.percent %}
          {% let color_text = "" %}
          {% include "color.html" %}
          <p class="{{color_text}}">{{"{:.2}"|format(totals.regions.percent)}} %</p>
        </th>
      </tr>
    </thead>
    <tbody>
      {%- for file in files %}
      <tr>
        <td><a href="./{{file.relative_path}}.html">{{file.relative_path}}</a></td>
        <td>
          <div class="progress-bar">
            {% let percent = file.summary.lines.percent %}
            {% let color_bg = "" %}
            {% include "color.html" %}
            <div class="{{color_bg}}" style="width: {{file.summary.lines.percent}}%"></div>
          </div>
        </td>
        <td>{{"{:.2}"|format(file.summary.lines.percent)}} %</td>
        <td>{{file.summary.lines.covered}} / {{file.summary.lines.count}}</td>
        <td>
          <div class="progress-bar">
            {% let percent = file.summary.functions.percent %}
            {% let color_bg = "" %}
            {% include "color.html" %}
            <div class="{{color_bg}}" style="width: {{file.summary.functions.percent}}%"></div>
          </div>
        </td>
        <td>{{"{:.2}"|format(file.summary.functions.percent)}} %</td>
        <td>{{file.summary.functions.covered}} / {{file.summary.functions.count}}</td>
        <td>
          <div class="progress-bar">
            {% let percent = file.summary.regions.percent %}
            {% let color_bg = "" %}
            {% include "color.html" %}
            <div class="{{color_bg}}" style="width: {{file.summary.regions.percent}}%"></div>
          </div>
        </td>
        <td>{{"{:.2}"|format(file.summary.regions.percent)}} %</td>
        <td>{{file.summary.regions.covered}} / {{file.summary.regions.count}}</td>
      </tr>
      {%- endfor %}
    </tbody>
  </table>
</div>

<p class="page-footer">
  Generated by <a href="{{PROJECT.repository}}">{{PROJECT.name}}</a> -- version {{PROJECT.version}}
</p>
{% endblock %}